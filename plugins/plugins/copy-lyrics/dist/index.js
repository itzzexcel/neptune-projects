var E=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var L=Object.getOwnPropertyNames;var A=Object.prototype.hasOwnProperty;var O=(t,e)=>()=>(t&&(e=t(t=0)),e);var R=(t,e)=>{for(var r in e)E(t,r,{get:e[r],enumerable:!0})},_=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of L(e))!A.call(t,o)&&o!==r&&E(t,o,{get:()=>e[o],enumerable:!(i=v(e,o))||i.enumerable});return t};var k=t=>_(E({},"__esModule",{value:!0}),t);var y={};R(y,{Tracer:()=>m,libTrace:()=>D});import{actions as h}from"@neptune";var m,D,C=O(()=>{"use strict";m=t=>{let e=s=>{let n=(...c)=>{s(t,...c)};return n.withContext=c=>(...u)=>{s(t,c,...u)},n},r=e(console.log),i=e(console.warn),o=e(console.error),f=e(console.debug),a=(s,n,c)=>{let u=d=>{s(d),n({message:`${t} - ${d}`,category:"OTHER",severity:c})};return u.withContext=d=>{let S=s.withContext(d);return l=>{S(l),l instanceof Error&&(l=l.message),n({message:`${t}.${d} - ${l}`,category:"OTHER",severity:c})}},u};return{log:r,warn:i,err:o,debug:f,msg:{log:a(r,h.message.messageInfo,"INFO"),warn:a(i,h.message.messageWarn,"WARN"),err:a(o,h.message.messageError,"ERROR")}}},D=m("[lib]")});C();C();var x=m("[Copy Lyrics]"),M=`
[class^="_lyricsText"]>div>span {
    user-select: text;
    cursor: text;
}

::selection {
    background: rgb(0, 0, 0);
    color: rgb(255, 255, 255);
}
`;function $(t){let e=document.createElement("style");return e.type="text/css",e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)),document.head.appendChild(e),e}function b(t){let e=document.createElement("textarea");e.value=t,e.style.position="fixed",document.body.appendChild(e),e.select();try{if(!document.execCommand("copy"))throw new Error("Failed to copy text.")}catch(r){x.msg.err(r)}finally{document.body.removeChild(e)}}var g=$(M),p=!1,w=function(){p=!0},N=function(t){if(p){let e=window.getSelection();if(e.toString().length>0){let r=[],o=e.getRangeAt(0).commonAncestorContainer;if(o.nodeType!==Node.ELEMENT_NODE&&o.nodeType!==Node.DOCUMENT_NODE){let n=o.parentElement;if(n&&n.hasAttribute("data-current")||o.ELEMENT_NODE.hasAttribute("data-current")){let c=e.toString().trim();b(c),x.msg.log("Copied to clipboard!");return}}let f=o.getElementsByTagName("span");for(let n of f)e.containsNode(n,!0)&&r.push(n);let a=!1,s="";r.forEach(n=>{n.hasAttribute("data-current")&&(a=!0,s+=n.textContent+`
`,[...n.classList].some(c=>c.startsWith("endOfStanza--"))&&(s+=`
`))}),a&&console.log(a),s=s.trim(),a===!0&&(b(s),x.msg.log("Copied to clipboard!"),window.getSelection&&e.removeAllRanges())}p=!1}},T=function(t){if(!p)return;let e=t.target;if(e.tagName.toLowerCase()==="span"&&e.hasAttribute("data-current"))return t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),!1};document.addEventListener("click",T,!0);document.addEventListener("mousedown",w);document.addEventListener("mouseup",N);function U(){g&&g.parentNode&&g.parentNode.removeChild(g),document.removeEventListener("click",T,!0),document.removeEventListener("mousedown",w),document.removeEventListener("mouseup",N)}export{U as onUnload};
